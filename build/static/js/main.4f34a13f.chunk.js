(this["webpackJsonpreader-daap"]=this["webpackJsonpreader-daap"]||[]).push([[0],{345:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"string","name":"_author","type":"string"},{"internalType":"string","name":"_title","type":"string"},{"internalType":"string","name":"_cover","type":"string"},{"internalType":"string","name":"_description","type":"string"}],"name":"addBook","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_index","type":"uint256"},{"internalType":"string","name":"_comment","type":"string"}],"name":"addComment","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_index","type":"uint256"},{"internalType":"uint256","name":"_price","type":"uint256"}],"name":"donate","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_index","type":"uint256"}],"name":"getBook","outputs":[{"internalType":"address payable","name":"","type":"address"},{"internalType":"string","name":"","type":"string"},{"internalType":"string","name":"","type":"string"},{"internalType":"string","name":"","type":"string"},{"internalType":"string","name":"","type":"string"},{"internalType":"uint256","name":"","type":"uint256"},{"components":[{"internalType":"uint256","name":"postId","type":"uint256"},{"internalType":"address","name":"commenterAddress","type":"address"},{"internalType":"string","name":"commentMessage","type":"string"}],"internalType":"struct Reader.Comment[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getBooksLength","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_index","type":"uint256"}],"name":"getComments","outputs":[{"components":[{"internalType":"uint256","name":"postId","type":"uint256"},{"internalType":"address","name":"commenterAddress","type":"address"},{"internalType":"string","name":"commentMessage","type":"string"}],"internalType":"struct Reader.Comment[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_index","type":"uint256"}],"name":"getcommentsLength","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}]')},346:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]')},353:function(e,t,n){},355:function(e,t,n){},367:function(e,t){},368:function(e,t){},370:function(e,t){},374:function(e,t){},398:function(e,t){},400:function(e,t){},414:function(e,t){},416:function(e,t){},444:function(e,t){},446:function(e,t){},535:function(e,t){},536:function(e,t){},628:function(e,t){},633:function(e,t){},815:function(e,t,n){"use strict";n.r(t);var a=n(14),r=n.n(a),s=n(341),i=n.n(s),c=(n(353),n(56)),u=n(27),o=n(17),p=n.n(o),l=(n(355),n(11)),d=function(e){return Object(l.jsx)("div",{children:Object(l.jsxs)("nav",{className:"navbar",children:[Object(l.jsx)("h1",{className:"brand-name",children:"Celo Reader Dapp"}),Object(l.jsx)("nav",{children:Object(l.jsxs)("span",{children:[" ",Object(l.jsx)("li",{children:Object(l.jsxs)("a",{className:"balance",children:[Object(l.jsx)("span",{children:e.cUSDBalance}),"cUSD"]})})]})})]})})},m=function(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)(""),c=Object(u.a)(i,2),o=c[0],p=c[1],d=Object(a.useState)(""),m=Object(u.a)(d,2),y=m[0],b=m[1],f=Object(a.useState)(""),j=Object(u.a)(f,2),x=j[0],h=j[1];return Object(l.jsx)("div",{children:Object(l.jsx)("form",{children:Object(l.jsxs)("div",{class:"form-row",children:[Object(l.jsx)("input",{type:"text",class:"form-control",value:r,onChange:function(e){return s(e.target.value)},placeholder:"Author Name"}),Object(l.jsx)("input",{type:"text",class:"form-control mt-2",value:o,onChange:function(e){return p(e.target.value)},placeholder:"Book title"}),Object(l.jsx)("input",{type:"text",class:"form-control mt-2",value:y,onChange:function(e){return b(e.target.value)},placeholder:"Cover image url"}),Object(l.jsx)("input",{type:"text",class:"form-control mt-2",value:x,onChange:function(e){return h(e.target.value)},placeholder:"Description"}),Object(l.jsx)("button",{type:"button",onClick:function(){return e.addBook(r,o,y,x)},class:"btn btn-dark mt-2",children:"Add Book"})]})})})},y=n(342),b=n.n(y),f=n(344),j=n(19),x=n.n(j),h=n(345),O=n(346),v=function(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),r=n[0],s=n[1];return Object(l.jsxs)("div",{className:"card-container",children:[e.bookks.map((function(t){return Object(l.jsx)("div",{className:"col-3",children:Object(l.jsxs)("div",{class:"card",children:[Object(l.jsx)("img",{className:"card-img-top",src:t.cover}),Object(l.jsxs)("div",{class:"card-body ",children:[Object(l.jsxs)("h5",{class:"card-title",children:["Author: ",t.author]}),Object(l.jsxs)("h6",{class:"card-subtitle",children:["Book Title: ",t.title]}),Object(l.jsx)("p",{class:"card-text mt-2",children:t.description}),e.userWa!==t.owner&&Object(l.jsx)("button",{type:"button",class:"btn btn-primary mt-2",onClick:function(){return e.donate(t.index)},children:"Donate"}),Object(l.jsx)("form",{children:Object(l.jsxs)("div",{class:"form-r",children:[Object(l.jsx)("input",{type:"text",class:"form-control mt-4",value:r,onChange:function(e){return s(e.target.value)},placeholder:"enter comment"}),Object(l.jsx)("button",{type:"button",onClick:function(){return e.addComment(t.index,r)},class:"btn btn-dark mt-2",children:"Add comment"}),Object(l.jsx)("h5",{class:"card-title mt-5",children:"Comments"}),t.comments.map((function(e){return Object(l.jsx)("p",{class:"card-text mt-2",children:e.commentMessage},e.index)})),";"]})})]})]})},t.index)})),";"]})},g="0x7084e7125e08b0BBAe2e1DD1ff4Fd421D3880BDF";var T=function(){var e=Object(a.useState)(null),t=Object(u.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(null),i=Object(u.a)(s,2),o=i[0],y=i[1],j=Object(a.useState)(null),T=Object(u.a)(j,2),w=T[0],k=T[1],C=Object(a.useState)(0),B=Object(u.a)(C,2),S=B[0],M=B[1],D=Object(a.useState)([]),A=Object(u.a)(D,2),F=A[0],_=A[1],N=Object(a.useState)([]),E=Object(u.a)(N,2),L=E[0],I=(E[1],function(){var e=Object(c.a)(p.a.mark((function e(){var t,n,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.celo){e.next=22;break}return e.prev=1,e.next=4,window.celo.enable();case 4:return t=new b.a(window.celo),n=Object(f.newKitFromWeb3)(t),e.next=8,n.web3.eth.getAccounts();case 8:return a=e.sent,r=a[0],n.defaultAccount=r,e.next=13,y(r);case 13:return e.next=15,k(n);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.log(e.t0);case 20:e.next=23;break;case 22:alert("Error Occurred");case 23:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(){return e.apply(this,arguments)}}()),J=Object(a.useCallback)(Object(c.a)(p.a.mark((function e(){var t,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.getTotalBalance(o);case 3:t=e.sent,n=t.cUSD.shiftedBy(-18).toFixed(2),a=new w.web3.eth.Contract(h,g),r(a),M(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),[o,w]),P=Object(a.useCallback)(Object(c.a)(p.a.mark((function e(){var t,a,r,s,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.methods.getBooksLength().call();case 2:for(t=e.sent,a=[],r=function(e){var t=new Promise(function(){var t=Object(c.a)(p.a.mark((function t(a,r){var s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.methods.getBook(e).call();case 2:s=t.sent,a({index:e,owner:s[0],author:s[1],title:s[2],cover:s[3],description:s[4],numberOfcomment:s[5],comments:s[6]});case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());a.push(t)},s=0;s<t;s++)r(s);return e.next=8,Promise.all(a);case 8:i=e.sent,_(i);case 10:case"end":return e.stop()}}),e)}))),[n]),U=function(){var e=Object(c.a)(p.a.mark((function e(t,a,r,s){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.methods.addBook(t,a,r,s).send({from:o});case 3:P(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),R=function(){var e=Object(c.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.methods.addComment(t,a).send({from:o});case 3:P(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),W=function(){var e=Object(c.a)(p.a.mark((function e(t){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=new w.web3.eth.Contract(O,"0x874069Fa1Eb16D44d622F2e0Ca25eeA172369bC1"),r=new x.a("2").shiftedBy(18).toString(),e.next=5,a.methods.approve(g,r).send({from:o});case 5:return e.next=7,n.methods.donate(t,r).send({from:o});case 7:P(),J(),alert("you have successfully donated to the writer"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),alert(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){I()}),[]),Object(a.useEffect)((function(){w&&o&&J()}),[w,o,J]),Object(a.useEffect)((function(){n&&P()}),[n,P]),Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(d,{cUSDBalance:S}),Object(l.jsx)(v,{userWallet:o,bookks:F,addComment:R,donate:W,coms:L}),Object(l.jsx)(m,{addBook:U})]})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,818)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),s(e),i(e)}))};n(811),n(812);i.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(T,{})}),document.getElementById("root")),w()}},[[815,1,2]]]);
//# sourceMappingURL=main.4f34a13f.chunk.js.map